import{a as Y,d as ue,t as q,b as L}from"../chunks/DKiDauQm.js";import{L as G,M as K,N as de,t as H,n as ce,O as ee,c as R,p as y,g as ae,h as B,z as p,a9 as ve,aa as _e,ab as z,s as S,d as k,e as he,ac as re,o as P,ad as me,ae as $,l as te,af as pe,ag as ye,x as F,ah as ge,ai as be,k as xe,aj as we,W as ne,ak as Ee,al as ke,a as se,E as Me,f as Te,b as Ae,am as Ie,an as Ne,ao as Re,I as Ce,G as Je,q as Le,ap as Q,Q as Se,a6 as I,a8 as U,u as $e,A as M,aq as De,a7 as T,a5 as Oe}from"../chunks/C3xHPWlp.js";import{d as He,c as Be}from"../chunks/CvPvnsS2.js";import{p as N,b as qe}from"../chunks/AdmMQLgc.js";import{o as Pe}from"../chunks/0nThgzI_.js";let W=!1;function ie(){W||(W=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const r of e.target.elements)(a=r.__on_r)==null||a.call(r)})},{capture:!0}))}function Ve(e){var a=de,r=H;G(null),K(null);try{return e()}finally{G(a),K(r)}}function Ye(e,a,r,s=r){e.addEventListener(a,()=>Ve(r));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),ie()}function Ge(e,a){return a}function Ke(e,a,r,s){for(var n=[],f=a.length,o=0;o<f;o++)be(a[o].e,n,!0);var d=f>0&&n.length===0&&r!==null;if(d){var c=r.parentNode;xe(c),c.append(r),s.clear(),w(e,a[0].prev,a[f-1].next)}we(n,()=>{for(var _=0;_<f;_++){var i=a[_];d||(s.delete(i.k),w(e,i.prev,i.next)),ne(i.e,!d)}})}function ze(e,a,r,s,n,f=null){var o=e,d={flags:a,items:new Map,first:null};{var c=e;o=y?R(ae(c)):c.appendChild(ce())}y&&B();var _=null,i=!1,h=ve(()=>{var u=r();return Me(u)?u:u==null?[]:te(u)});ee(()=>{var u=p(h),l=u.length;if(i&&l===0)return;i=l===0;let t=!1;if(y){var g=o.data===_e;g!==(l===0)&&(o=z(),R(o),S(!1),t=!0)}if(y){for(var b=null,v,m=0;m<l;m++){if(k.nodeType===8&&k.data===he){o=k,t=!0,S(!1);break}var A=u[m],E=s(A,m);v=le(k,d,b,null,A,E,m,n,a,r),d.items.set(E,v),b=v}l>0&&R(z())}y||Fe(u,d,o,n,a,s,r),f!==null&&(l===0?_?re(_):_=P(()=>f(o)):_!==null&&me(_,()=>{_=null})),t&&S(!0),p(h)}),y&&(o=k)}function Fe(e,a,r,s,n,f,o){var d=e.length,c=a.items,_=a.first,i=_,h,u=null,l=[],t=[],g,b,v,m;for(m=0;m<d;m+=1){if(g=e[m],b=f(g,m),v=c.get(b),v===void 0){var A=i?i.e.nodes_start:r;u=le(A,a,u,u===null?a.first:u.next,g,b,m,s,n,o),c.set(b,u),l=[],t=[],i=u.next;continue}if(Qe(v,g,m),(v.e.f&$)!==0&&re(v.e),v!==i){if(h!==void 0&&h.has(v)){if(l.length<t.length){var E=t[0],x;u=E.prev;var V=l[0],C=l[l.length-1];for(x=0;x<l.length;x+=1)X(l[x],E,r);for(x=0;x<t.length;x+=1)h.delete(t[x]);w(a,V.prev,C.next),w(a,u,V),w(a,C,E),i=E,u=C,m-=1,l=[],t=[]}else h.delete(v),X(v,i,r),w(a,v.prev,v.next),w(a,v,u===null?a.first:u.next),w(a,u,v),u=v;continue}for(l=[],t=[];i!==null&&i.k!==b;)(i.e.f&$)===0&&(h??(h=new Set)).add(i),t.push(i),i=i.next;if(i===null)continue;v=i}l.push(v),u=v,i=v.next}if(i!==null||h!==void 0){for(var J=h===void 0?[]:te(h);i!==null;)(i.e.f&$)===0&&J.push(i),i=i.next;var oe=J.length;if(oe>0){var fe=d===0?r:null;Ke(a,J,fe,c)}}H.first=a.first&&a.first.e,H.last=u&&u.e}function Qe(e,a,r,s){pe(e.v,a),e.i=r}function le(e,a,r,s,n,f,o,d,c,_){var i=(c&Ee)!==0,h=(c&ke)===0,u=i?h?ye(n):F(n):n,l=(c&ge)===0?o:F(o),t={i:l,v:u,k:f,a:null,e:null,prev:r,next:s};try{return t.e=P(()=>d(e,u,l,_),y),t.e.prev=r&&r.e,t.e.next=s&&s.e,r===null?a.first=t:(r.next=t,r.e.next=t.e),s!==null&&(s.prev=t,s.e.prev=t.e),t}finally{}}function X(e,a,r){for(var s=e.next?e.next.e.nodes_start:r,n=a?a.e.nodes_start:r,f=e.e.nodes_start;f!==s;){var o=se(f);n.before(f),f=o}}function w(e,a,r){a===null?e.first=r:(a.next=r,a.e.next=r&&r.e),r!==null&&(r.prev=a,r.e.prev=a&&a.e)}function Ue(e,a,r,s,n){var f=e,o="",d;ee(()=>{if(o===(o=a()??"")){y&&B();return}d!==void 0&&(ne(d),d=void 0),o!==""&&(d=P(()=>{if(y){k.data;for(var c=B(),_=c;c!==null&&(c.nodeType!==8||c.data!=="");)_=c,c=se(c);if(c===null)throw Te(),Ae;Y(k,_),f=R(c);return}var i=o+"",h=ue(i);Y(ae(h),h.lastChild),f.before(h)}))})}function We(e,a,r){var s=e==null?"":""+e;return s===""?null:s}function Z(e,a,r,s,n,f){var o=e.__className;if(y||o!==r){var d=We(r);(!y||d!==e.getAttribute("class"))&&(d==null?e.removeAttribute("class"):e.className=d),e.__className=r}return f}function Xe(e){if(y){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var s=e.value;j(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var n=e.checked;j(e,"checked",null),e.checked=n}}};e.__on_r=r,Ie(r),ie()}}function j(e,a,r,s){var n=e.__attributes??(e.__attributes={});y&&(n[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||n[a]!==(n[a]=r)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Ne]=r),e.removeAttribute(a))}function Ze(e,a,r=a){var s=Re();Ye(e,"input",n=>{var f=n?e.defaultValue:e.value;if(f=D(e)?O(f):f,r(f),s&&f!==(f=a())){var o=e.selectionStart,d=e.selectionEnd;e.value=f??"",d!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(d,e.value.length))}}),(y&&e.defaultValue!==e.value||Ce(a)==null&&e.value)&&r(D(e)?O(e.value):e.value),Je(()=>{var n=a();D(e)&&n===O(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function D(e){var a=e.type;return a==="number"||a==="range"}function O(e){return e===""?null:+e}function je(e,a){e.key==="Enter"&&a()}var ea=q('<meta name="description" content="Chat with our bot">'),aa=q("<div><div><!></div></div>"),ra=q('<div class="mx-auto my-5 flex h-[80vh] max-w-2xl flex-col rounded-lg border border-gray-200 bg-white"><div class="flex-1 overflow-y-auto p-5"></div> <div class="flex gap-2 border-t border-gray-200 p-5"><input type="text" placeholder="Type your message..." class="focus:ring-primary flex-1 rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:outline-none focus:ring-2"> <button class="rounded-md bg-sky-500 px-4 py-2 text-white transition-opacity hover:opacity-90">Send</button></div></div>');function oa(e,a){Le(a,!0);let r=Q(N([])),s=Q(""),n;async function f(l){const t=new FormData;return t.append("msg",l),(await fetch("http://127.0.0.1:5000/getReply",{method:"POST",body:t})).text()}function o(){window.MathJax&&window.MathJax.typesetPromise([n]).catch(l=>console.error("MathJax error:",l))}async function d(){if(!p(s).trim())return;M(r,N([...p(r),{text:p(s),sender:"user"}]));const l=p(s);M(s,""),setTimeout(async()=>{try{let t=await f(l);M(r,N([...p(r),{text:t,sender:"bot"}]))}catch(t){console.error("Error getting reply:",t),M(r,N([...p(r),{text:"I'm having trouble responding!",sender:"bot"}]))}setTimeout(()=>{n&&(n.scrollTop=n.scrollHeight)},0),setTimeout(o,0)},500)}Pe(()=>{const l=document.getElementById("MathJax-script");l&&l.remove();const t=document.createElement("script");return t.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js",t.async=!0,t.id="MathJax-script",window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"},options:{renderActions:{addMenu:[],checkLoading:[]}},startup:{ready:()=>{window.MathJax.startup.defaultReady(),o()}}},document.head.appendChild(t),()=>{document.getElementById("MathJax-script")&&document.getElementById("MathJax-script").remove()}}),Se(()=>{p(r).length&&setTimeout(o,0)});var c=ra();Be(l=>{var t=ea();De.title="Chat Bot",L(l,t)});var _=I(c);ze(_,21,()=>p(r),Ge,(l,t)=>{var g=aa(),b=I(g),v=I(b);Ue(v,()=>p(t).text),T(b),T(g),Oe(()=>{Z(g,1,`mb-3 flex ${(p(t).sender==="user"?"justify-end":"")??""}`),Z(b,1,` inline-block max-w-[70%] whitespace-pre-wrap break-words rounded-2xl px-4 py-2 ${(p(t).sender==="user"?"bg-sky-500 text-white":"bg-gray-100")??""}`)}),L(l,g)}),T(_),qe(_,l=>n=l,()=>n);var i=U(_,2),h=I(i);Xe(h),h.__keydown=[je,d];var u=U(h,2);u.__click=d,T(i),T(c),Ze(h,()=>p(s),l=>M(s,l)),L(e,c),$e()}He(["keydown","click"]);export{oa as component};
